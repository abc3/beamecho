"use strict";(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[895],{2477:function(Z,j,e){e.r(j);var g=e(5574),i=e.n(g),I=e(15009),t=e.n(I),B=e(13769),d=e.n(B),T=e(99289),h=e.n(T),O=e(67294),P=e(96974),y=e(11774),b=e(45360),u=e(40741),v=e(15867),C=e(4393),m=e(96365),l=e(83863),a=e(73360),n=e(84567),r=e(55742),s=e(80854),o=e(1827),_=e(85893),p=["id"],E=function(){var K=h()(t()().mark(function U(R){var f,A,L,W,M,D;return t()().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return f=R.id,A=d()(R,p),f?(L=function(){return(0,o.V9)(f,A)},W="Source successfully updated",M="Failed to update Source"):(L=function(){return(0,o.j1)(A)},W="Source successfully created",M="Failed to create Source"),c.prev=2,c.next=5,L();case 5:D=c.sent,D&&D.data?(b.ZP.success(W),f||s.history.push("/sources/".concat(D.data.id))):b.ZP.error(M),console.log("response",D),c.next=14;break;case 10:c.prev=10,c.t0=c.catch(2),console.error("Failed to perform action:",c.t0),b.ZP.error(M);case 14:case"end":return c.stop()}},U,null,[[2,10]])}));return function(R){return K.apply(this,arguments)}}(),w=function(U){console.log("Failed:",U)},F=function(U){var R=(0,P.UO)(),f=R.id;console.log("Props SourcesItem",U,f);var A={remember:!0,dbport:5432,use_ssl:!1,ip_version:"v4"},L=u.Z.useForm(),W=i()(L,1),M=W[0],D=(0,s.useRequest)(function(){return(0,o.b5)(f)},{throwOnError:!0}),x=D.data,c=D.loading,S=D.run;return x&&M.setFieldsValue(x),(0,_.jsxs)(y._z,{children:[(0,_.jsx)(v.ZP,{onClick:function(){s.history.push("/sources")},style:{marginBottom:"15px",marginRight:"15px"},children:" \u2190 Back to Sources"}),(0,_.jsx)(C.Z,{loading:c,children:(0,_.jsxs)(u.Z,{form:M,labelCol:{span:8},wrapperCol:{span:16},style:{maxWidth:600},initialValues:A,onFinish:E,onFinishFailed:w,autoComplete:"off",children:[(0,_.jsx)(u.Z.Item,{name:"id",initialValue:f,hidden:!0,children:(0,_.jsx)(m.Z,{})}),(0,_.jsx)(u.Z.Item,{label:"Type",name:"type",rules:[{message:"Please select a type!"}],children:(0,_.jsx)(l.default,{defaultValue:"PostgreSQL",disabled:!0,options:[{label:"Auth Key",value:"auth_key"}]})}),(0,_.jsx)(u.Z.Item,{label:"Name",name:"name",rules:[{required:!0,message:"Please input name!"}],children:(0,_.jsx)(m.Z,{})}),(0,_.jsx)(u.Z.Item,{label:"Host",name:"host",rules:[{required:!0,message:"Please input your host!"}],children:(0,_.jsx)(m.Z,{})}),(0,_.jsx)(u.Z.Item,{label:"Password",name:"dbpass",rules:[{required:!0,message:"Please input your password!"}],children:(0,_.jsx)(m.Z.Password,{})}),(0,_.jsx)(u.Z.Item,{label:"Database Name",name:"dbname",rules:[{required:!0,message:"Please input your name!"}],children:(0,_.jsx)(m.Z,{})}),(0,_.jsx)(u.Z.Item,{label:"Database User",name:"dbuser",rules:[{required:!0,message:"Please input your user!"}],children:(0,_.jsx)(m.Z,{})}),(0,_.jsx)(u.Z.Item,{label:"Port",name:"dbport",rules:[{required:!0,message:"Please input your port!"}],children:(0,_.jsx)(a.Z,{min:1,max:65535})}),(0,_.jsx)(u.Z.Item,{label:"Use SSL",name:"use_ssl",valuePropName:"checked",children:(0,_.jsx)(n.Z,{})}),(0,_.jsx)(u.Z.Item,{label:"IP Version",name:"ip_version",children:(0,_.jsxs)(r.ZP.Group,{children:[(0,_.jsx)(r.ZP,{value:"v4",children:"IPv4"}),(0,_.jsx)(r.ZP,{value:"v6",children:"IPv6"})]})}),(0,_.jsx)(u.Z.Item,{wrapperCol:{offset:8,span:16},children:(0,_.jsx)(v.ZP,{type:"primary",htmlType:"submit",children:f?"Update":"Create"})})]})})]})};j.default=F},1827:function(Z,j,e){e.d(j,{V9:function(){return u},b5:function(){return O},bx:function(){return y},e6:function(){return T},j1:function(){return C}});var g=e(15009),i=e.n(g),I=e(99289),t=e.n(I),B=e(80854),d=e(9986);function T(){return h.apply(this,arguments)}function h(){return h=t()(i()().mark(function l(){return i()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",(0,d.U2)("/api/sources"));case 1:case"end":return n.stop()}},l)})),h.apply(this,arguments)}function O(l,a){return P.apply(this,arguments)}function P(){return P=t()(i()().mark(function l(a,n){return i()().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:if(a){s.next=2;break}return s.abrupt("return",Promise.resolve({}));case 2:return s.abrupt("return",(0,d.U2)("/api/sources/".concat(a)));case 3:case"end":return s.stop()}},l)})),P.apply(this,arguments)}function y(l){return b.apply(this,arguments)}function b(){return b=t()(i()().mark(function l(a){return i()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",(0,d.IV)("/api/sources/".concat(a)));case 1:case"end":return r.stop()}},l)})),b.apply(this,arguments)}function u(l,a){return v.apply(this,arguments)}function v(){return v=t()(i()().mark(function l(a,n){return i()().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.abrupt("return",(0,d.gz)("/api/sources/".concat(a),"source",n));case 1:case"end":return s.stop()}},l)})),v.apply(this,arguments)}function C(l,a){return m.apply(this,arguments)}function m(){return m=t()(i()().mark(function l(a,n){return i()().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.abrupt("return",(0,d.v_)("/api/sources","source",a,n));case 1:case"end":return s.stop()}},l)})),m.apply(this,arguments)}},9986:function(Z,j,e){e.d(j,{IV:function(){return l},U2:function(){return y},gz:function(){return C},v_:function(){return u}});var g=e(9783),i=e.n(g),I=e(15009),t=e.n(I),B=e(97857),d=e.n(B),T=e(99289),h=e.n(T),O=e(80854);function P(){return localStorage.getItem("_bec_access_token")}function y(n,r,s){return b.apply(this,arguments)}function b(){return b=h()(t()().mark(function n(r,s,o){return t()().wrap(function(p){for(;;)switch(p.prev=p.next){case 0:return console.log("call get()",r,s,o),p.abrupt("return",(0,O.request)(r,d()({method:"GET",headers:{Authorization:P()},params:d()({},s)},o||{})));case 2:case"end":return p.stop()}},n)})),b.apply(this,arguments)}function u(n,r,s,o){return v.apply(this,arguments)}function v(){return v=h()(t()().mark(function n(r,s,o,_){return t()().wrap(function(E){for(;;)switch(E.prev=E.next){case 0:return console.log("post",r,s,o,_),E.abrupt("return",(0,O.request)(r,d()({method:"POST",headers:{Authorization:P()},data:i()({},s,o)},_||{})));case 2:case"end":return E.stop()}},n)})),v.apply(this,arguments)}function C(n,r,s,o){return m.apply(this,arguments)}function m(){return m=h()(t()().mark(function n(r,s,o,_){return t()().wrap(function(E){for(;;)switch(E.prev=E.next){case 0:return console.log("put",r,o,_),E.abrupt("return",(0,O.request)(r,d()({method:"PUT",headers:{Authorization:P()},data:i()({},s,o)},_||{})));case 2:case"end":return E.stop()}},n)})),m.apply(this,arguments)}function l(n,r,s){return a.apply(this,arguments)}function a(){return a=h()(t()().mark(function n(r,s,o){return t()().wrap(function(p){for(;;)switch(p.prev=p.next){case 0:return console.log("del",r,s,o),p.abrupt("return",(0,O.request)(r,d()({method:"DELETE",headers:{Authorization:P()},data:{app:d()({},s)}},o||{})));case 2:case"end":return p.stop()}},n)})),a.apply(this,arguments)}}}]);
