"use strict";(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[539],{29373:function(G,D,e){e.r(D),e.d(D,{default:function(){return J}});var M=e(5574),T=e.n(M),R=e(15009),u=e.n(R),C=e(13769),p=e.n(C),B=e(99289),m=e.n(B),f=e(67294),c=e(1413),Z=e(42110),b=e(91146),U=function(j,h){return f.createElement(b.Z,(0,c.Z)((0,c.Z)({},j),{},{ref:h,icon:Z.Z}))};U.displayName="PlusOutlined";var v=f.forwardRef(U),x=e(96974),g=e(11774),I=e(45360),o=e(40741),_=e(15867),i=e(4393),r=e(96365),s=e(83863),l=e(50406),t=e(80854),n=e(41946),a=e(85893),z=["id"],V=function(){var L=m()(u()().mark(function j(h){var y,W,w,P,E,A,F,K,O;return u()().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:if(!h.key_file.file){d.next=8;break}return y=new FileReader,W=h.key_file.file,y.readAsDataURL(W),d.next=6,new Promise(function($,Q){y.onload=function(S){return $(S.target.result)},y.onerror=function(S){return Q(S)}});case 6:w=d.sent,h.key_file=w;case 8:return P=h.id,E=p()(h,z),P?(A=function(){return(0,n.rf)(P,E)},F="App successfully updated",K="Failed to update App"):(A=function(){return(0,n.L5)(E)},F="App successfully created",K="Failed to create App"),d.prev=10,d.next=13,A();case 13:O=d.sent,O&&O.data?(I.ZP.success(F),P||t.history.push("/apps/".concat(O.data.id))):I.ZP.error(K),console.log("response",O),d.next=22;break;case 18:d.prev=18,d.t0=d.catch(10),console.error("Failed to perform action:",d.t0),I.ZP.error(K);case 22:case"end":return d.stop()}},j,null,[[10,18]])}));return function(h){return L.apply(this,arguments)}}(),N=function(j){console.log("Failed:",j)},H=function(j){var h=(0,x.UO)(),y=h.id,W=o.Z.useForm(),w=T()(W,1),P=w[0],E=(0,t.useRequest)(function(){return(0,n.Mq)(y)},{throwOnError:!0}),A=E.data,F=E.loading,K=E.run;return(0,f.useEffect)(function(){A&&P.setFieldsValue(A)},[A]),(0,a.jsxs)(g._z,{children:[(0,a.jsx)(_.ZP,{onClick:function(){t.history.push("/apps")},style:{marginBottom:"15px",marginRight:"15px"},children:" \u2190 Back to Apps"}),(0,a.jsx)(i.Z,{loading:F,children:(0,a.jsxs)(o.Z,{form:P,labelCol:{span:8},wrapperCol:{span:16},style:{maxWidth:600},onFinish:V,onFinishFailed:N,autoComplete:"off",children:[(0,a.jsx)(o.Z.Item,{name:"id",initialValue:y,hidden:!0,children:(0,a.jsx)(r.Z,{})}),(0,a.jsx)(o.Z.Item,{label:"Type",name:"type",rules:[{message:"Please select a type!"}],children:(0,a.jsx)(s.default,{defaultValue:"auth_key",disabled:!0,options:[{label:"Auth Key",value:"auth_key"}]})}),(0,a.jsx)(o.Z.Item,{label:"Name",name:"name",rules:[{required:!0,message:"Please input name!"}],children:(0,a.jsx)(r.Z,{})}),(0,a.jsx)(o.Z.Item,{label:"Team ID",name:"team_id",rules:[{required:!0,message:"Please input your Team ID!"}],children:(0,a.jsx)(r.Z,{})}),(0,a.jsx)(o.Z.Item,{label:"Key ID",name:"key_id",rules:[{required:!0,message:"Please input your Key ID!"}],children:(0,a.jsx)(r.Z,{})}),(0,a.jsx)(o.Z.Item,{label:"App Bundle ID",name:"app_bundle_id",rules:[{required:!0,message:"Please input your App Bundle ID!"}],children:(0,a.jsx)(r.Z,{})}),(0,a.jsx)(o.Z.Item,{label:"Key File",name:"key_file",rules:[{required:!0,message:"Please input your Key File!"}],children:(0,a.jsx)(l.Z,{listType:"picture-card",beforeUpload:function(){return!1},children:(0,a.jsxs)("button",{style:{border:0,background:"none"},type:"button",children:[(0,a.jsx)(v,{}),(0,a.jsx)("div",{style:{marginTop:8},children:"Upload"})]})})}),(0,a.jsx)(o.Z.Item,{wrapperCol:{offset:8,span:16},children:(0,a.jsx)(_.ZP,{type:"primary",htmlType:"submit",children:y?"Update":"Create"})})]})})]})},J=H},41946:function(G,D,e){e.d(D,{C6:function(){return f},L5:function(){return x},Mq:function(){return _},Nl:function(){return Z},rf:function(){return U}});var M=e(97857),T=e.n(M),R=e(15009),u=e.n(R),C=e(99289),p=e.n(C),B=e(80854),m=e(9986);function f(){return c.apply(this,arguments)}function c(){return c=p()(u()().mark(function r(){return u()().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.abrupt("return",(0,m.U2)("/api/apps"));case 1:case"end":return l.stop()}},r)})),c.apply(this,arguments)}function Z(r){return b.apply(this,arguments)}function b(){return b=p()(u()().mark(function r(s){return u()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,m.IV)("/api/apps/".concat(s)));case 1:case"end":return t.stop()}},r)})),b.apply(this,arguments)}function U(r,s){return v.apply(this,arguments)}function v(){return v=p()(u()().mark(function r(s,l){return u()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",(0,m.gz)("/api/apps/".concat(s),"app",l));case 1:case"end":return n.stop()}},r)})),v.apply(this,arguments)}function x(r,s){return g.apply(this,arguments)}function g(){return g=p()(u()().mark(function r(s,l){return u()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",(0,m.v_)("/api/apps","app",s,l));case 1:case"end":return n.stop()}},r)})),g.apply(this,arguments)}function I(r,s){return o.apply(this,arguments)}function o(){return o=_asyncToGenerator(_regeneratorRuntime().mark(function r(s,l){return _regeneratorRuntime().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",request("/api/apps",_objectSpread({method:"POST",data:{app:_objectSpread({},s)}},l||{})));case 1:case"end":return n.stop()}},r)})),o.apply(this,arguments)}function _(r,s){return i.apply(this,arguments)}function i(){return i=p()(u()().mark(function r(s,l){return u()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(s){n.next=2;break}return n.abrupt("return",Promise.resolve({}));case 2:return n.abrupt("return",(0,m.U2)("/api/apps/".concat(s)));case 3:case"end":return n.stop()}},r)})),i.apply(this,arguments)}},9986:function(G,D,e){e.d(D,{IV:function(){return I},U2:function(){return Z},gz:function(){return x},v_:function(){return U}});var M=e(9783),T=e.n(M),R=e(15009),u=e.n(R),C=e(97857),p=e.n(C),B=e(99289),m=e.n(B),f=e(80854);function c(){return localStorage.getItem("_bec_access_token")}function Z(_,i,r){return b.apply(this,arguments)}function b(){return b=m()(u()().mark(function _(i,r,s){return u()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return console.log("call get()",i,r,s),t.abrupt("return",(0,f.request)(i,p()({method:"GET",headers:{Authorization:c()},params:p()({},r)},s||{})));case 2:case"end":return t.stop()}},_)})),b.apply(this,arguments)}function U(_,i,r,s){return v.apply(this,arguments)}function v(){return v=m()(u()().mark(function _(i,r,s,l){return u()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return console.log("post",i,r,s,l),n.abrupt("return",(0,f.request)(i,p()({method:"POST",headers:{Authorization:c()},data:T()({},r,s)},l||{})));case 2:case"end":return n.stop()}},_)})),v.apply(this,arguments)}function x(_,i,r,s){return g.apply(this,arguments)}function g(){return g=m()(u()().mark(function _(i,r,s,l){return u()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return console.log("put",i,s,l),n.abrupt("return",(0,f.request)(i,p()({method:"PUT",headers:{Authorization:c()},data:T()({},r,s)},l||{})));case 2:case"end":return n.stop()}},_)})),g.apply(this,arguments)}function I(_,i,r){return o.apply(this,arguments)}function o(){return o=m()(u()().mark(function _(i,r,s){return u()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return console.log("del",i,r,s),t.abrupt("return",(0,f.request)(i,p()({method:"DELETE",headers:{Authorization:c()},data:{app:p()({},r)}},s||{})));case 2:case"end":return t.stop()}},_)})),o.apply(this,arguments)}}}]);
